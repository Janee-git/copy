- block:
        - name: Copy local queue MQSC file to remote host
          copy:
            src: "{{ mqsc_file }}"
            dest: "/tmp/{{ mqsc_file }}"
          become: yes
          become_user: mqm



#################
- name: Copy multiple MQSC files to remote host
  hosts: mq_servers
  vars:
    mqsc_files:
      - src: "/path/to/local/file1.mqsc"
        dest: "/tmp/file1.mqsc"
      - src: "/path/to/local/file2.mqsc"
        dest: "/tmp/file2.mqsc"
      - src: "/path/to/local/file3.mqsc"
        dest: "/tmp/file3.mqsc"

  tasks:
    - block:
        - name: Copy local MQSC files to remote host
          copy:
            src: "{{ item.src }}"
            dest: "{{ item.dest }}"
          become: yes
          become_user: mqm
          loop: "{{ mqsc_files }}"
Explanation:
vars:: Defines a list of files with their respective source (src) and destination (dest) paths.
block:: Groups the tasks together. In this case, it helps in organizing the copy operations and can handle error handling or cleanup if needed.
copy:: Ansible module that copies files from the local machine to the remote host.
loop:: Iterates over the mqsc_files list, copying each file to its specified destination.
become: and become_user:: Ensures the task runs with elevated privileges as the mqm user, which is typically required for IBM MQ operations.
This approach is flexible and can easily be expanded to include more files or different destinations. If you need additional customizations or error handling within the block, let me know!
##############
make mqsc file for ibm mq on below command 
ALTER QMGR CHLAUTH(DISABLED)
REFRESH SECURITY TYPE(CONNAUTH)

--------------------
To create an MQSC file for IBM MQ with the following commands:

Disable Channel Authentication (CHLAUTH) for the Queue Manager.
Refresh the Security settings for Connection Authentication (CONNAUTH).
MQSC File Content (disable_chlauth_refresh_auth.mqsc):
mqsc
Copy
Edit
ALTER QMGR CHLAUTH(DISABLED)
REFRESH SECURITY TYPE(CONNAUTH)
Explanation:
ALTER QMGR CHLAUTH(DISABLED): Disables channel authentication checks for the Queue Manager. This is typically used in non-production environments or for troubleshooting purposes.
REFRESH SECURITY TYPE(CONNAUTH): Refreshes the security settings related to connection authentication. This ensures that changes to authentication configurations are applied immediately.
Usage:
You can use this MQSC file by running the following command on your IBM MQ server:

bash
Copy
Edit
runmqsc <QMGR_NAME> < disable_chlauth_refresh_auth.mqsc
Replace <QMGR_NAME> with the actual name of your Queue Manager.

Let me know if you need more configurations or help with automation using Ansible!

#####################

- block:
        - name: environment setup before create QMGR
          command: source /opt/mqm/bin/setmqenv || export MQSNOAUT=YES && set |grep -i mq
          become: yes
          become_user: mqm
          when: qm_exists.rc != 0

TASK [websphere-config : environment setup before create QMGR] *****************************************
fatal: [wmqeuu3.prod]: FAILED! => {"changed": false, "cmd": "source /opt/mqm/bin/setmqenv '||' export MQSNOAUT=YES '&&' set '|grep' -i mq", "msg": "[Errno 13] Permission denied: b'source'", "rc": 13}


- block:
    - name: Environment setup before creating QMGR
      shell: |
        source /opt/mqm/bin/setmqenv || export MQSNOAUT=YES && set | grep -i mq
      become: yes
      become_user: mqm
      when: qm_exists.rc != 0
